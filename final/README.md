# **[111-1] Web Programming Final**

## (**Group 22) Bus Error â€“ å°ç£çš„æŠ€è¡“è«–å£‡ ğŸšŒ**

- æˆ‘å€‘è£½ä½œäº†ä¸€å€‹æä¾›è»Ÿé«”é–‹ç™¼è€…å€‘äº¤æµçš„è«–å£‡ã€‚åœ¨é€™å€‹ç¶²ç«™ä¸Šï¼Œä½¿ç”¨è€…å¯ä»¥
    
    ****è‡ªç”±æå•****â€”ç¢°åˆ°å›°é›£äº†å—ï¼Ÿä¸å¦¨å‘ç¤¾ç¾¤ä¼™ä¼´æå•ï¼Œè®“å¤§å®¶ä¸€èµ·è·Ÿä½ æ‰¾å‡ºç­”æ¡ˆã€‚
    
    ****ç›¡æƒ…è¨è«–****â€”åœ¨æ­¤å°‹æ‰¾å’Œä½ é‡ä¸Šç›¸åŒç–‘é›£çš„äººï¼Œä¸€èµ·è¨è«–å•é¡Œã€åˆ†äº«è¦‹è§£ï¼Œæ‰¾å‡ºæœ€ä½³è§£æ±ºæ–¹æ¡ˆã€‚
    
- **Demo å½±ç‰‡ï¼š** [https://youtu.be/k_5798L-jHE](https://youtu.be/k_5798L-jHE)
- **Deployed é€£çµï¼š**[Bus Error â€“ å°ç£çš„æŠ€è¡“è«–å£‡è¨è«–å€ ğŸšŒ](https://bus-error-production.up.railway.app/)
- **Githubï¼š**[itsalicelee/Bus-Error (github.com)](https://github.com/itsalicelee/Bus-Error)
- **çµ„å“¡ï¼š**
    - B07303024 æå“æ¨º
    - B10902099 éŸ“æ™ºæ°
    - B10101053 é‚±å† éŠ˜

### ğŸšŒÂ  åŠŸèƒ½ä»‹ç´¹

- **ä½¿ç”¨è€…ï¼š**
    - Google OAuth2.0ç™»å…¥
    - æ›´æ–°å€‹äººåç¨±
    - ä½¿ç”¨è€…è³‡è¨Šçµ±è¨ˆï¼ˆåŠ å…¥ç¤¾ç¾¤å¤©æ•¸/è²¼æ–‡æ•¸/ç•™è¨€æ•¸/ç•™è¨€è¢«æ¡ç´æ•¸ï¼‰
- **æ–‡ç« ï¼š**
    - åˆ—å‡ºæ‰€æœ‰æ–‡ç« ï¼Œç”¨ä¸»é¡Œç¯©é¸æ–‡ç« 
    - é¡¯ç¤ºæ¯ç¯‡æ–‡ç« çš„ç¸½è©•åˆ†/ç•™è¨€æ•¸/é–±è¦½æ¬¡æ•¸
    - å°‡æ–‡ç« æŒ‰ç…§æœ€æ–°/ç†±é–€/å°šå¾…è§£æ±ºæ’åº
    - æ”¯æ´Markdownèªæ³•æ–°å¢è²¼æ–‡ï¼Œä¸¦åœ¨ç™¼å¸ƒå‰å…ˆé è¦½
    - åˆªé™¤ã€æ¨å™“æ–‡ç« 
- **ç•™è¨€ï¼š**
    - æ¨å™“ç•™è¨€
    - ä¾ç…§æœ€é«˜åˆ†/æœ€æ–°æ’åº
    - æ”¯æ´Markdownèªæ³•æ–°å¢ç•™è¨€ï¼Œä¸¦åœ¨ç™¼å¸ƒå‰å…ˆé è¦½
    - æ–‡ç« ä½œè€…å¯æ¡ç´æ„è¦‹
- **ä»‹é¢ï¼š**
    - Dark Mode

### ğŸšŒÂ  ä½¿ç”¨èˆ‡åƒè€ƒä¹‹æ¡†æ¶/æ¨¡çµ„/åŸå§‹ç¢¼/ç¬¬ä¸‰æ–¹å¥—ä»¶

- **å‰ç«¯ï¼š**
    - React.js, antd, Axios, FortAwesome, PropTypes
    - æ—¥æœŸæ ¼å¼åŒ–åŠé‹ç®—ï¼šDay.js
    - æ–‡ç« é¡¯ç¤ºï¼šReact-Markdown (å¦é…åˆ KaTeX, remark-gfm, rehype-katex, remark-math ç­‰ä½¿ç”¨)
    - ç¨‹å¼ç¢¼è¦å‰‡æª¢æŸ¥ï¼šESLint
- **å¾Œç«¯ï¼š**
    - Node.js, Express, cors
    - èº«ä»½é©—è­‰ï¼šGoogle Auth Library, JsonWebToken
- **è³‡æ–™åº«ï¼š** 
    - MongoDB

### ğŸšŒÂ  å°ˆé¡Œè£½ä½œå¿ƒå¾—

- æå“æ¨ºï¼š
    
    > åœ¨å­¸æœŸä¸­çš„æ™‚å€™å°±æœ‰å€‹æƒ³æ³•æƒ³è¦åšè«–å£‡é¡çš„å°ˆé¡Œï¼Œéå¸¸æ„Ÿè¬æˆ‘åœ¨è‡‰æ›¸ç¤¾åœ˜ä¸­æ‰€æ‰¾çš„å…©ä½çµ„å“¡å€‘ä¸ä½†æ¡ç´äº†æˆ‘çš„æƒ³æ³•ï¼Œä¹Ÿå¾é ­åˆ°å°¾éƒ½éå¸¸ç½©çš„è§£æ±ºäº†è¨±å¤šå•é¡Œï¼ŒçœŸçš„æ·±æ·±çš„æ„Ÿè¬ğŸ¥º   å¤šè™§å…©ä½çµ„å“¡å¼·å¤§çš„å‰å¾Œç«¯åŠŸåŠ›ä»¥åŠé»˜å¥‘ï¼Œè®“æˆ‘å€‘çš„æœŸæœ«å°ˆé¡Œå¯ä»¥é †åˆ©å®Œæˆã€‚å¦å¤–ä¹Ÿå¾ˆæ„Ÿè¬ç†±å¿ƒçš„åŒå­¸åŠå¤œå…©é»å¤šå›ç­”æˆ‘å€‘åˆ©ç”¨deployç¶²ç«™é‡åˆ°çš„å•é¡Œï¼Œè®“æˆ‘å€‘çš„ç¶²ç«™å¯ä»¥é †åˆ©deployã€‚æˆ‘è¦ºå¾—æœŸæœ«å°ˆé¡Œæ˜¯ä¸€å€‹çœŸæ­£è€ƒé©—å¤§å®¶æŠŠæ‰€å­¸æ•´åˆåœ¨ä¸€èµ·çš„æ©Ÿæœƒï¼Œé€éå°ˆé¡Œå¾é›¶é–‹å§‹buildå‡ºä¸€å€‹å…¨ç«¯çš„ç¶²ç«™çœŸçš„å¾ˆæœ‰æˆå°±æ„Ÿï¼Œä¹Ÿé †ä¾¿è¤‡ç¿’äº†æ•´å€‹å­¸æœŸæ‰€å­¸çš„æ±è¥¿ã€‚å¸Œæœ›ä¹‹å¾Œä¹Ÿèƒ½æŒçºŒç¶­è­·é€™å€‹ç¶²ç«™ï¼Œä¸¦ä¸”æŒçºŒæ¨å‡ºæ–°åŠŸèƒ½ï¼
    > 
- éŸ“æ™ºæ°ï¼š
    
    > æˆ‘è¦ºå¾—æ™‚é–“è·Ÿåˆä½œæ˜¯é€™æ¬¡å°ˆæ¡ˆè£¡æœ€å…·æŒ‘æˆ°æ€§çš„éƒ¨ä»½ã€‚å› ç‚ºæ¯ä½çµ„å“¡æ‰€è² è²¬çš„éƒ¨ä»½éƒ½æœ‰æ‰€ä¸åŒï¼Œæ‰€ä»¥è¦èƒ½æ¸…æ¥šåœ°è·Ÿåˆ¥äººè§£é‡‹è‡ªå·±çš„æƒ³æ³•å’Œéœ€æ±‚ï¼Œå…¶ä¸­å°±åŒ…å«äº†æ¸…æ¥šçš„ commit message è·Ÿè¦ç¯„åŒ–çš„ code styleã€‚ä¸å¾—ä¸èªªï¼Œé€™å°æ–¼ä»¥å‰ commit message åªæ‰“ä¸€å€‹é»ã€éƒ½å¯« ninja code çš„æˆ‘è€Œè¨€æ˜¯ä¸€å€‹å¤§æŒ‘æˆ°ï¼Œä½†å¾ä¸­ä¹Ÿèƒ½å­¸åˆ°ä¸å°‘çš„ç¶“é©—ã€‚
    > 
    > 
    > æ™‚é–“çš„éƒ¨ä»½ï¼Œå› ç‚ºé€™å­¸æœŸéæ–¼é«˜ä¼°è‡ªå·±çš„èƒ½åŠ›ï¼Œé¸äº†å¤ªå¤šçš„èª²ï¼Œå°è‡´åˆ°äº† 12 æœˆåº•æ‰é–‹å§‹ç¢° codeã€‚ä½†å¥½åœ¨éšŠå‹å¤  carryï¼Œä¸€åˆ‡éƒ½é‚„è¶•å¾—ä¸Šã€‚èƒ½åœ¨æ™‚é–“ç·Šæ¹Šçš„å­¸æœŸæœ«æŠŠå°ˆæ¡ˆåšåˆ°é€™å€‹ç¨‹åº¦ï¼Œå¿ƒè£¡çœŸçš„åªå‰©ä¸‹æ„Ÿå‹•äº†ã€‚
    > 
- é‚±å† éŠ˜ï¼š
    
    > é€™æ¬¡å°ˆæ¡ˆä¸­ï¼Œæˆ‘è¦ºå¾—æœ€å›°é›£çš„éƒ¨åˆ†å°±æ˜¯åœ¨æ–¼ç¨‹å¼å”ä½œã€‚ç‚ºäº†ç¢ºä¿ code çš„å“è³ªé‚„æœ‰ä¸€è‡´æ€§ï¼Œåœ¨å°ˆæ¡ˆä¸­å¿…é ˆéå¸¸æ³¨é‡ commit message é‚„æœ‰ä¹¾æ·¨çš„ code styleã€‚å› æ­¤æˆ‘å€‘æ±ºå®šå¼•ç”¨ ESlint ä¸¦ç”¨ Airbnb çš„è¦ç¯„é€²è¡Œç¨‹å¼æª¢æŸ¥ã€‚ä¸€é–‹å§‹åœ¨å¯«çš„æ™‚å€™çœŸçš„æ˜¯æ¥µå…¶ç—›è‹¦ï¼Œåªè¦æ ¼å¼æœ‰éŒ¯å°±æœƒç›´æ¥ compile errorã€‚å„˜ç®¡ä¸€é–‹å§‹çš„é©æ‡‰æœŸè »é•·çš„ï¼Œä½†æ˜¯ä¹Ÿå¾ä¸­äº†è§£åˆ°ä¹¾æ·¨çš„ code style ç¢ºå¯¦å°ç¨‹å¼å”ä½œéå¸¸æœ‰å¹«åŠ©ã€‚
    é€™æ¬¡å°ˆæ¡ˆå°æˆ‘ä¾†èªªæ˜¯ä¸€å€‹éå¸¸æœ‰è¶£çš„æŒ‘æˆ°ï¼å¾ä¸€é–‹å§‹è¨è«–åˆ°çœŸæ­£å¯¦ä½œï¼Œé›–ç„¶é‡åˆ°äº†ä¸€å¤§å †æ²’é‡åˆ°éçš„å¯æ€•å•é¡Œï¼Œä½†æ˜¯æœ€å¾Œéƒ½æœ‰é€éåœ˜éšŠåˆä½œã€è¨è«–é‚„æœ‰ä¸æ–·çš„ç†¬å¤œä¾†è§£æ±ºã€‚è‘—å¯¦æ˜¯å¾ˆæ„Ÿè¬çµ„å“¡å€‘çš„å¤§åŠ›å‡±ç‘ï¼Œæœ€å¾Œèƒ½é †åˆ©å®ŒæˆçœŸçš„éå¸¸æœ‰æˆå°±æ„Ÿã€‚ä¹Ÿå¸Œæœ›æœªä¾†èƒ½åœ¨é€™å€‹é ˜åŸŸæŒçºŒå‰é€²**ğŸš€ğŸš€**ã€‚
    > 
    

### ğŸšŒÂ  **å¦‚ä½•åœ¨ localhost å®‰è£èˆ‡æ¸¬è©¦**

1. å»ºç«‹Google OAuth 2.0çš„**clientID**å’Œ**secret** *(å¯ç•¥éï¼Œä¸¦ç›´æ¥ä½¿ç”¨æˆ‘å€‘æä¾›çš„è³‡è¨Š)*
    - åœ¨[Google cloud console](https://console.cloud.google.com/)å»ºç«‹ä¸€å€‹æ–°çš„å°ˆæ¡ˆ
        
        ![1672771360082.jpg](./img/1672771360082.jpg)
        
    - åœ¨å´é‚Šçš„æ¬„ä½é¸æ“‡**APIå’Œæœå‹™**
        
        ![1672771506926.jpg](./img/1672771506926.jpg)
        
    - åœ¨**OAuthåŒæ„ç•«é¢**é¸æ“‡**å¤–éƒ¨**ä¸¦å»ºç«‹
        
        ![1672771575486.jpg](./img/1672771575486.jpg)
        
    - å¡«å¯«æ‡‰ç”¨ç¨‹å¼åç¨±ä»¥åŠä¿¡ç®±
        
        ![1672771754031.jpg](./img/1672771754031.jpg)
        
    - åœ¨**æ†‘è­‰**é é¢é»é¸**å»ºç«‹æ†‘è­‰>OAuthç”¨æˆ¶ç«¯ID**
        
        ![1672771824827.jpg](./img/1672771824827.jpg)
        
    - æ‡‰ç”¨ç¨‹å¼é¡å‹é¸æ“‡**ç¶²é æ‡‰ç”¨ç¨‹å¼**ï¼Œå¡«å¯«ä»»æ„åç¨±ï¼Œå·²æˆæ¬Šçš„JavaScriptä¾†æºè«‹å¡«å¯« **http://localhost:3000, http://localhost:4000, http://localhost**
        
        ![1672771923137.jpg](./img/1672771923137.jpg)
        
    - é»é¸ä¸‹è¼‰æŒ‰éµå–å¾—clientIDä»¥åŠsecret
        
        ![1672820405876.jpg](./img/1672820405876.jpg)
        

2. åœ¨æ­¤å°ˆæ¡ˆçš„æ ¹ç›®éŒ„ä¹‹ä¸‹ï¼š
- å®‰è£æ‰€éœ€å¥—ä»¶:  `yarn install:all`
- æ–°å¢å¾Œç«¯ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ: `cp ./backend/.env.defaults ./backend/.env`
- å°‡æ­¥é©Ÿ1å–å¾—çš„clientIDä»¥åŠsecretå¡«å…¥`./backend/.env` ï¼Œä¸¦å¡«å…¥MONGO_URL
    
    > è‹¥å»ºç«‹clientIDèˆ‡secretæœ‰å•é¡Œï¼Œå¯ä½¿ç”¨ä»¥ä¸‹çš„è³‡è¨Š
    > 
    > 
    > ```makefile
    > clientID: 887771497744-skrt87qhj0cfmhtlk672nna8ticrpkes.apps.googleusercontent.com
    > secret: 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
    > ```
    > 
    
    ```bash
    # in ./backend/.env
    MONGO_URL=[your mongo db url]
    GOOGLE_CLIENT_ID=[clientID]
    JWT_SECRET=[secret]
    MODE=[mode]
    ```
    
- åˆæ¬¡ä½¿ç”¨å‰ï¼Œéœ€è¦åˆå§‹åŒ–è³‡æ–™åº«ã€‚å…·é«”æ­¥é©Ÿå¦‚ä¸‹ï¼ˆ é¡ä¼¼ Hack 2 çš„æ–¹å¼ ï¼‰ï¼š
    1. æŠŠä¸Šæ–¹ç¨‹å¼ç‰‡æ®µçš„ `MODE` è¨­ç‚º `MODE=Reset`ï¼Œä¸¦åœ¨æ ¹ç›®éŒ„åŸ·è¡Œ `yarn backend`ã€‚åŸ·è¡Œç´°ç¯€å°‡é€éæ¨™æº–è¼¸å‡ºå°åœ¨ console ä¸­ã€‚
    2. åˆå§‹åŒ–å®Œæˆå¾Œï¼Œè«‹æŠŠä¸Šè¿°çš„ `MODE` è¨­å› `MODE=` (ç©ºç™½)ï¼Œé¿å…ä»¥å¾Œæ¯æ¬¡åŸ·è¡Œæ™‚è³‡æ–™åº«éƒ½è¢«é‡ç½®ã€‚
- æ›´æ”¹å‰ç«¯`./frontend/src/container/PageAuthButton.js` ç¬¬43è¡Œï¼Œå¡«å…¥clientID*(è‹¥ä½¿ç”¨æˆ‘å€‘æä¾›çš„è³‡è¨Šå¯ç•¥éé€™æ­¥é©Ÿ)*

```jsx
// Modify ./frontend/src/container/PageAuthButton.js Line 43 client_id
if (window.google) {
     window.google.accounts.id.initialize({
     client_id: '887771497744-skrt87qhj0cfmhtlk672nna8ticrpkes.apps.googleusercontent.com', // Modify to your clientID
     callback: handleGoogle,
});
```

- é–‹å•Ÿå¾Œç«¯: `yarn backend`
- é–‹å•Ÿå‰ç«¯: `yarn frontend`
- åœ¨`http://localhost:3000`ç€è¦½ç¶²é 
